@model IEnumerable<H2017_PW_Equipe6.Models.Communication>

@{
    ViewBag.Title = "Communiqués - " + ViewData["nameClub"];
}



<div class="container">
    <h2>Communiqués</h2>   
    <br />

    @foreach (var item in Model)
    {
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3>
                        @item.titreCOM
                    </h3>
                </div>

                <div class="panel-body">
                    <p>@item.contenuCOM</p>
                    <div class="text-right">
                        @item.dateCOM.ToLongDateString()
                    </div>

                    @if (item.FichierCommunications.Count > 0) {
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" href="@("#liste-fichier" + item.idCOM)">Pièces jointes</a>
                                </h4>
                            </div>
                            <div id="@("liste-fichier" + item.idCOM)" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <ul>
                                        @foreach (var fichier in item.FichierCommunications)
                                        {
                                            <li>
                                                <a href="@("~/../../Content/media/communication/" + fichier.pathFichier)" download>@fichier.nom</a>
                                            </li>
                                        }
                                    </ul>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    }
</div>

